<div id="category-tabs"></div>
<div class="container-divider"></div>
<div class="container">
  <nav class="sub-nav">
    {{breadcrumbs}}
    <div class="search-container">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" focusable="false" viewBox="0 0 12 12" class="search-icon">
        <circle cx="4.5" cy="4.5" r="4" fill="none" stroke="currentColor"/>
        <path stroke="currentColor" stroke-linecap="round" d="M11 11L7.5 7.5"/>
      </svg>
      {{search scoped=settings.scoped_kb_search submit=false}}
    </div>
  </nav>

  <div class="category-container">
    <div class="category-content">
      <header class="page-header">
        <h1>{{category.name}}</h1>
        {{#if category.description}}
<!--           <p class="page-header-description">{{category.description}}</p> -->
        {{/if}}
      </header>

        {{#each sections}}
          <section class="section">
            <h2 class="section-tree-title">
              <a href="{{url}}">
              {{name}}
              </a>
            </h2>
           {{#if sections}}
              <ul class="section-list">
                {{#each sections}}
                  <li class="section-list-item">
                    <a href="{{url}}">
                      <span>{{name}}</span>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        focusable="false"
                        viewBox="0 0 16 16"
                        aria-hidden="true"
                      >
                        <path
                          fill="none"
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-width="2"
                          d="M5 14.5l6.1-6.1c.2-.2.2-.5 0-.7L5 1.5"
                        ></path>
                      </svg>
                    </a>
                  </li>
                {{/each}}
              </ul>
            {{/if}}
            {{#if articles}}
              <ul class="article-list">
                {{#each articles}}
                  <li class="article-list-item{{#if promoted}} article-promoted{{/if}}">
                    {{#if promoted}}
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" focusable="false" viewBox="0 0 12 12" class="icon-star" title="{{t 'promoted'}}">
                        <path fill="currentColor" d="M2.88 11.73c-.19 0-.39-.06-.55-.18a.938.938 0 01-.37-1.01l.8-3L.35 5.57a.938.938 0 01-.3-1.03c.12-.37.45-.63.85-.65L4 3.73 5.12.83c.14-.37.49-.61.88-.61s.74.24.88.6L8 3.73l3.11.17a.946.946 0 01.55 1.68L9.24 7.53l.8 3a.95.95 0 01-1.43 1.04L6 9.88l-2.61 1.69c-.16.1-.34.16-.51.16z"/>
                      </svg>
                    {{/if}}
                    <a href="{{url}}" class="article-list-link">{{title}}</a>
                    {{#if internal}}
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" focusable="false" viewBox="0 0 16 16" class="icon-lock" title="{{t 'internal'}}">
                        <rect width="12" height="9" x="2" y="7" fill="currentColor" rx="1" ry="1"/>
                        <path fill="none" stroke="currentColor" d="M4.5 7.5V4a3.5 3.5 0 017 0v3.5"/>
                      </svg>
                    {{/if}}
                  </li>
                {{/each}}
              </ul>
              {{#if more_articles}}
                <a href="{{url}}" class="see-all-articles">
                  {{t 'show_all_articles' count=article_count}}
                </a>
              {{/if}}
            {{/if}}

          </section>
        {{else}}
          <i class="category-empty">
            <a href="{{category.url}}">{{t 'empty'}}</a>
          </i>
        {{/each}}
      </div>
    </div>
  </div>
</div>
<script>
    // Define categoriesFromSettings directly using Handlebars
  var categoriesFromSettings = [
      { name: "{{settings.a_box_title}}", url: "{{settings.a_box_url}}" },
      { name: "{{settings.b_box_title}}", url: "{{settings.b_box_url}}" },
      { name: "{{settings.c_box_title}}", url: "{{settings.c_box_url}}" },
      { name: "{{settings.d_box_title}}", url: "{{settings.d_box_url}}" },
      { name: "{{settings.e_box_title}}", url: "{{settings.e_box_url}}" },
      { name: "{{settings.f_box_title}}", url: "{{settings.f_box_url}}" },
      { name: "{{settings.g_box_title}}", url: "{{settings.g_box_url}}" },
      { name: "{{settings.h_box_title}}", url: "{{settings.h_box_url}}" },
      { name: "{{settings.i_box_title}}", url: "{{settings.i_box_url}}" },
      { name: "{{settings.j_box_title}}", url: "{{settings.j_box_url}}" },
      { name: "{{settings.k_box_title}}", url: "{{settings.k_box_url}}" },
      { name: "{{settings.l_box_title}}", url: "{{settings.l_box_url}}" },
      { name: "{{settings.m_box_title}}", url: "{{settings.m_box_url}}" },
      { name: "{{settings.n_box_title}}", url: "{{settings.n_box_url}}" },
      { name: "{{settings.o_box_title}}", url: "{{settings.o_box_url}}" },
      { name: "{{settings.p_box_title}}", url: "{{settings.p_box_url}}" },
      { name: "{{settings.q_box_title}}", url: "{{settings.q_box_url}}" },
      { name: "{{settings.r_box_title}}", url: "{{settings.r_box_url}}" },
      { name: "{{settings.s_box_title}}", url: "{{settings.s_box_url}}" },
      { name: "{{settings.t_box_title}}", url: "{{settings.t_box_url}}" },
      { name: "{{settings.u_box_title}}", url: "{{settings.u_box_url}}" },
      { name: "{{settings.v_box_title}}", url: "{{settings.v_box_url}}" },
      { name: "{{settings.w_box_title}}", url: "{{settings.w_box_url}}" },
      { name: "{{settings.x_box_title}}", url: "{{settings.x_box_url}}" },
      { name: "{{settings.y_box_title}}", url: "{{settings.y_box_url}}" },
      { name: "{{settings.z_box_title}}", url: "{{settings.z_box_url}}" }
  ];

  // Find the div where the tabs will go
  var categoryTabsContainer = document.getElementById('category-tabs');


  // Loop through the categories and create the tabs
  categoriesFromSettings.forEach(function(categoryData) {
      // Skip the default category title
      if (categoryData.name !== "Category 1") {
          // Create a new list item and anchor tag
          var categoryListItem = document.createElement('li');
          var categoryLink = document.createElement('a');

          // Set the href property of the anchor tag to the category's URL
          categoryLink.href = categoryData.url;
          categoryLink.textContent = categoryData.name;

          // Append the anchor tag to the list item, and the list item to the container
          categoryListItem.appendChild(categoryLink);
          categoryTabsContainer.appendChild(categoryListItem);
      }
  });

  // Highlight the current category
  // Since the categoryId is no longer available in the categoriesFromSettings data, 
  // we'll use the category URL to find the current active category
  // https://teamworks.zendesk.com/hc/en-us/categories/10828435911956-INFLCR
  // Assuming the URL structure is consistent:
  var currentCategoryUrl = window.location.href;  // This gets the current page's URL

  var currentCategoryLink = document.querySelector('a[href="' + currentCategoryUrl + '"]');
  if (currentCategoryLink) { 
      currentCategoryLink.parentElement.classList.add('activetab'); 
  } 


</script>





